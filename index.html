<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title><%- APP_TITLE %></title>
    <script>
      !function (win, doc) {
        var timer
        var userFontSize = ''
        var docEl = document.documentElement
        if (win.getComputedStyle) {
          userFontSize = win.getComputedStyle(docEl, null)['fontSize']
        } else if (docEl.currentStyle) {
          userFontSize = docEl.currentStyle['fontSize']
        } else {
          userFontSize = 16
        }
        var baseFontSizeRatio = (parseFloat(userFontSize) / 16).toFixed(2)

        function setFontSize() {
          var winWidth = Math.min(win.innerWidth, 750)
          var size = (winWidth * 100) / 750
          doc.documentElement.style.fontSize = size / baseFontSizeRatio + 'px'
        }

        win.addEventListener('resize', function () {
          if (timer) {
            clearTimeout(timer)
          }
          timer = setTimeout(function () {
            setFontSize()
          }, 300)
        })
        setFontSize()
      }(window, document)
    </script>
    <script src="https://res.wx.qq.com/open/js/jweixin-1.6.0.js"></script>
  </head>
  <body>
    <main id="app"></main>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
